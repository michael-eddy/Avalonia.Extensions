<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <BassOSXTargetDir Condition=" '$(BassOSXTargetDir)' == '' ">libBass\osx</BassOSXTargetDir>
    </PropertyGroup>
    <ItemGroup>
        <BassOSXIncludeFiles Condition="'@(BassOSXIncludeFiles)'==''" Include="bass.%2A" />
    </ItemGroup>    
    <Target Name="CollectBassFilesToCopyOSX" BeforeTargets="BeforeBuild">
        <ItemGroup>
            <BassOSXIncludeFilesFullPath Include="$([MSBuild]::Unescape($(MSBuildThisFileDirectory)..\build\osx\%(BassOSXIncludeFiles.Identity)))" />
            <BassOSXExcludeFilesFullPath Include="$([MSBuild]::Unescape($(MSBuildThisFileDirectory)..\build\osx\%(BassOSXExcludeFiles.Identity)))" Condition="'%(BassOSXExcludeFiles.Identity)'!=''" />
            <Content Include="@(BassOSXIncludeFilesFullPath)" Exclude="@(BassOSXExcludeFilesFullPath)">
                <Link>$(BassOSXTargetDir)\$([MSBuild]::MakeRelative($(MSBuildThisFileDirectory)..\build\osx\, %(FullPath)))</Link>
                <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
            </Content>
        </ItemGroup>
    </Target>
</Project>